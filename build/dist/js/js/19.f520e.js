webpackJsonp([19],{d0q9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=n("lC5x"),i=n.n(s),a=n("rVsN"),r=n.n(a),c=n("J0Oq"),l=n.n(c),d=n("3cXf"),p=n.n(d),u=n("IXui"),m=(n("pxwZ"),n("8e4C")),g=(n("VKKs"),n("9r/T")),q=(u.a,{name:"PickGoodsSign",components:{XButton:u.a},created:function(){this.$store.commit("updateTitle",m.k),this.pickAddress=this.$route.query.extractSite,this.common.wxConfig(!1,["getLocation"])},mounted:function(){this.init()},data:function(){return{disabled:!1,pickAddress:"",currentAddress:"",pickPos:null,currentPos:null}},methods:{init:function(){var e=this;wx.ready(function(){console.log("suceess"),e.getGeocoder(),Object(g.setTimeout)(function(){e.createControlDiv()},1e3)}),wx.error(function(e){console.log(p()(e))})},getCurrentPos:function(){var e=this;return l()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new r.a(function(t,n){wx.getLocation({type:"gcj02",success:function(n){console.log("res="+p()(n)),e.currentPos=new qq.maps.LatLng(n.latitude,n.longitude),t(e.currentPos)}})}).catch(function(e){console.log(e),reject(e)}));case 1:case"end":return t.stop()}},t,e)}))()},getGeocoder:function(){var e=this;new qq.maps.Geocoder({complete:function(t){console.log(p()(t)),e.pickPos=new qq.maps.LatLng(t.detail.location.lat,t.detail.location.lng);var n={zoom:13,center:e.pickPos,mapTypeId:qq.maps.MapTypeId.ROADMAP,scaleControl:!0,zoomControlOptions:{position:qq.maps.ControlPosition.RIGHT_BOTTOM}};o=new qq.maps.Map(document.getElementById("container"),n);var s=new qq.maps.Marker({map:o,position:e.pickPos}),i=new qq.maps.Label({position:e.pickPos,offset:new qq.maps.Size(15,-30),map:o,content:e.pickAddress});new qq.maps.Circle({map:o,center:e.pickPos,radius:1e3,strokeWeight:1});qq.maps.event.addListener(s,"click",function(e){i.setVisible(!0),i.getMap()?i.setMap(null):i.setMap(o)})}}).getLocation(this.pickAddress)},getGeverseGeocoder:function(e){var t=this;new qq.maps.Geocoder({complete:function(e){console.log(p()(e));e.detail.addressComponents;t.currentAddress=e.detail.address.substring(2),t.currentPos=new qq.maps.LatLng(e.detail.location.lat,e.detail.location.lng),console.log(p()(t.currentPos),p()(t.pickPos));var n=t.common.getDistance(e.detail.location.lat,e.detail.location.lng,t.pickPos.lat,t.pickPos.lng);console.log("=="+n),n<m.f?t.disabled=!1:t.disabled=!0}}).getAddress(e)},signConfirm:function(){this.$router.push({path:"/init/UpdateStatus",query:this.$route.query})},createControlDiv:function(){var e=this,t=void 0,n=new qq.maps.Point(16,40),s=new qq.maps.Size(35,40),i=new qq.maps.Point(0,0),a=(new qq.maps.MarkerImage("img/center.gif",s,i,n),document.createElement("div"));new function(n,o){n.style.padding="5px 10px",n.style.margin="160px 0 0 10px",n.style.backgroundColor="#FFFFFF",n.index=1,n.innerHTML="<i class='fa fa-location-arrow fa-lg'></i>",qq.maps.event.addDomListener(n,"click",function(n){e.getCurrentPos().then(function(n){console.log("position="+p()(n)),null!=t&&t.setMap(null),t=new qq.maps.Marker({map:o,position:n}),o.panTo(n),e.getGeverseGeocoder(n)})})}(a,o);o.controls[qq.maps.ControlPosition.LEFT_CENTER].push(a)}}}),f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pick-goods-sign"},[n("div",{attrs:{id:"container"}}),e._v(" "),n("div",{staticClass:"description"},[n("p",{staticClass:"content"},[e._v("提货地点 : "+e._s(e.pickAddress))]),e._v(" "),n("p",{staticClass:"content"},[e._v("当前位置 : "+e._s(e.currentAddress))]),e._v(" "),n("p",{staticClass:"hint"},[e._v("到达指定提货点附近, 点击获取定位, 如果当前位置在提货点电子围栏范围内, 点击签到")])]),e._v(" "),n("div",{staticStyle:{padding:"10px 25px"}},[n("x-button",{attrs:{disabled:e.disabled,type:"primary"},nativeOn:{click:function(t){return e.signConfirm(t)}}},[e._v("签到确认")])],1)])},staticRenderFns:[]};var v=n("C7Lr")(q,f,!1,function(e){n("sWyl")},null,null);t.default=v.exports},sWyl:function(e,t){}});