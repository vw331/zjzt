webpackJsonp([20],{Hh2b:function(e,i){},ho5y:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("3cXf"),n=t.n(r),l=t("CKVb"),o=t("fvyU"),s=t("IXui"),c=t("o+C2"),a=t("gpPJ"),d=t("pxwZ"),v=t("8e4C"),h=t("YaEn"),u=(l.a,o.a,s.a,c.a,a.a,{name:"Vehicleinfo",components:{Group:l.a,XInput:o.a,XButton:s.a,PopupPicker:c.a,Cell:a.a},data:function(){return{disabled:!0,driverName:"",mobile:"",license:"",licenseValue:function(e){return{valid:/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[警京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼]{0,1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/.test(e),msg:"车牌号有误!"}},vehicleType:["请选择"],vehicleTypeList:[["请选择","微型车","4.2","5.2","6.2","6.8","9.6","13.5","17.5"]],drivingLicense:"",drivingLicenseValue:function(e){return{valid:e.length>=2,msg:"证件号有误!"}},driver:["请选择"],driverList:[["请选择"]],driverItems:[]}},created:function(){if(this.$store.commit("updateTitle",v.t),""!=this.$route.query.item){var e=this.$route.query.item;this.driverName=e.driver_name,this.mobile=e.driver_phone,this.license=e.license,this.vehicleType=[e.vehicle],this.drivingLicense=e.driving_license}},methods:{vehicleinfoCheck:function(){this.$refs.driverRef.valid&&this.$refs.mobileRef.valid&&this.$refs.licenseRef.valid&&"请选择"!==this.vehicleType[0]&&this.$refs.drivingLicenseRef.valid?this.disabled=!1:this.disabled=!0,console.log(" this.disabled="+this.disabled)},onHide:function(){var e=this;if("请选择"!==this.driver[0]){var i=this.driver[0].split("|");this.driver[0]=i[0],this.driverItems.forEach(function(t){i[0].trim()===t.driverName&&i[1].trim()===t.driverMoblie&&i[2].trim()===t.license&&(e.driverName=t.driverName,e.mobile=t.driverMoblie,e.license=t.license,e.vehicleType=[t.vehicleType],e.drivingLicense=t.drivingLicense)}),this.disabled=!1}else this.disabled=!0,this.driverName="",this.mobile="",this.license="",this.vehicleType=[""],this.drivingLicense=""},onShow:function(){var e=this;this.driverList=[["请选择"]],this.$store.commit("updateLoading",!0),d.a.getDrivers().then(function(i){e.$store.commit("updateLoading",!1),0===i.code?i.data.length>0?(e.driverItems=i.data,e.driverItems.forEach(function(i){e.driverList[0].push(i.driverName+" | "+i.driverMoblie+" | "+i.license)})):e.$vux.toast.text("司机信息列表为空, 请手动编写.","middle"):e.$vux.toast.text("获取司机信息失败.","middle")},function(i){console.log("error="+n()(i)),e.$vux.toast.text("error="+n()(i),"middle"),e.$store.commit("updateLoading",!1)})},complete:function(){var e=this;console.log("complete");var i={truck_loading_no:this.$route.query.truck_loading_no,accept:this.$route.query.accept,license:this.license,vehicle:this.vehicleType[0],driver_name:this.driverName,driver_phone:this.mobile,driving_license:this.drivingLicense};console.log("params="+n()(i)),this.$store.commit("updateLoading",!0),d.a.doAcceptBill(i).then(function(i){e.$store.commit("updateLoading",!1),0===i.code?(e.$vux.toast.text("受理成功.","middle"),h.a.back(-1)):e.$vux.toast.text(i.message,"middle")},function(i){e.$store.commit("updateLoading",!1)})}}}),p={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"vehicleinfo"},[t("group",{attrs:{title:"从已存在的司机中选择或输入","label-width":"5em"}},[t("popup-picker",{attrs:{title:"司机信息","popup-title":"司机",data:e.driverList,placeholder:"请选择"},on:{"on-show":e.onShow,"on-hide":e.onHide,"on-change":e.check},model:{value:e.driver,callback:function(i){e.driver=i},expression:"driver"}})],1),e._v(" "),t("group",{attrs:{"label-width":"5.5em","label-margin-right":"2em","label-align":"left"}},[t("x-input",{ref:"driverRef",attrs:{title:"司机",placeholder:"请输入司机姓名","is-type":"china-name",required:""},on:{"on-change":e.vehicleinfoCheck},model:{value:e.driverName,callback:function(i){e.driverName=i},expression:"driverName"}}),e._v(" "),t("x-input",{ref:"mobileRef",attrs:{title:"手机号",placeholder:"请输入司机手机号","is-type":"china-mobile",keyboard:"number",required:""},on:{"on-change":e.vehicleinfoCheck},model:{value:e.mobile,callback:function(i){e.mobile=i},expression:"mobile"}}),e._v(" "),t("x-input",{ref:"licenseRef",attrs:{title:"车牌号",placeholder:"请输入车牌号","is-type":e.licenseValue,required:""},on:{"on-change":e.vehicleinfoCheck},model:{value:e.license,callback:function(i){e.license=i},expression:"license"}}),e._v(" "),t("popup-picker",{attrs:{title:"车型","popup-title":"车型选择",data:e.vehicleTypeList,placeholder:"请选择"},on:{"on-change":e.vehicleinfoCheck},model:{value:e.vehicleType,callback:function(i){e.vehicleType=i},expression:"vehicleType"}}),e._v(" "),t("x-input",{ref:"drivingLicenseRef",attrs:{title:"证件号",placeholder:"请输入证件号","is-type":e.drivingLicenseValue,required:""},on:{"on-change":e.vehicleinfoCheck},model:{value:e.drivingLicense,callback:function(i){e.drivingLicense=i},expression:"drivingLicense"}})],1),e._v(" "),t("div",{staticStyle:{padding:"25px"}},[t("x-button",{attrs:{disabled:e.disabled,type:"primary","action-type":"submit"},nativeOn:{click:function(i){return e.complete(i)}}},[e._v("完成")])],1)],1)},staticRenderFns:[]};var m=t("C7Lr")(u,p,!1,function(e){t("Hh2b")},null,null);i.default=m.exports}});