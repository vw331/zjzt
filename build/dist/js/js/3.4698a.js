webpackJsonp([3],{"7+bF":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});Number,Number,Boolean,Boolean;var s={name:"grid",methods:{countColumn:function(){this.childrenSize=this.$children.length,this.$children.forEach(function(t,e){return t.index=e})}},props:{rows:{type:Number,validator:function(){return!0}},cols:{type:Number},showLrBorders:{type:Boolean,default:!0},showVerticalDividers:{type:Boolean,default:!0}},computed:{column:function(){return this.cols||this.childrenSize}},data:function(){return{childrenSize:3}}},n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"weui-grids",class:{"vux-grid-no-lr-borders":!this.showLrBorders}},[this._t("default")],2)},staticRenderFns:[]};var o=i("C7Lr")(s,n,!1,function(t){i("oL2B")},null,null).exports,a=i("7+S+"),r={name:"grid-item",props:["icon","label","link"],created:function(){this.$parent.countColumn()},mounted:function(){this.$slots.icon&&(this.hasIconSlot=!0),this.$slots.label&&(this.hasLabelSlot=!0)},destroyed:function(){this.$parent.countColumn()},computed:{isLast:function(){return!((this.index+1)%this.$parent.column)},style:function(){var t=this.$parent.column;if(t&&3!==t){var e={};return e.width=100/t+"%",e}}},methods:{onClick:function(){this.$emit("on-item-click"),Object(a.a)(this.link,this.$router)}},data:function(){return{index:0,hasIconSlot:!1,hasLabelSlot:!1}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"weui-grid",class:{"vux-grid-item-no-border":t.isLast&&!t.$parent.showLrBorders||!t.isLast&&!t.$parent.showVerticalDividers},style:t.style,attrs:{href:"javascript:;"},on:{click:t.onClick}},[t.hasIconSlot||t.icon?i("div",{staticClass:"weui-grid__icon"},[t._t("icon",[i("img",{attrs:{src:t.icon,alt:""}})])],2):t._e(),t._v(" "),t.hasLabelSlot||t.label?i("p",{staticClass:"weui-grid__label"},[t._t("label",[i("span",{domProps:{innerHTML:t._s(t.label)}})])],2):t._e(),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var c=i("C7Lr")(r,l,!1,function(t){i("OE2t")},null,null).exports,u=(String,{name:"flow",props:{orientation:{type:String,default:"horizontal"}}}),d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-wepay-flow",class:{"weui-wepay-flow_vertical":"vertical"===this.orientation}},[e("div",{staticClass:"weui-wepay-flow__bd"},[this._t("default")],2)])},staticRenderFns:[]};var f=i("C7Lr")(u,d,!1,function(t){i("pME6")},null,null).exports,p=(String,Number,String,Boolean,{name:"flow-state",props:{state:[String,Number],title:String,isDone:Boolean},computed:{titlePosition:function(){return"vertical"===this.$parent.orientation?"right":"bottom"}}}),h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-wepay-flow__li",class:{"weui-wepay-flow__li_done":t.isDone}},[i("div",{staticClass:"weui-wepay-flow__state"},[t._v(t._s(t.state))]),t._v(" "),i("p",{class:"weui-wepay-flow__title-"+t.titlePosition},[t._t("title",[t._v(t._s(t.title))])],2)])},staticRenderFns:[]},v=i("C7Lr")(p,h,!1,null,null,null).exports,m=(String,String,Boolean,Number,String,Number,String,{name:"flow-line",props:{tip:String,tipDirection:String,isDone:Boolean,lineSpan:[Number,String],processSpan:[Number,String]},methods:{getWidth:function(t){return"number"==typeof t?t+"%":t}},computed:{finalTipDirection:function(){return void 0===this.tipDirection?"vertical"===this.$parent.orientation?"left":"top":this.tipDirection},styles:function(){if(this.lineSpan){var t=this.$parent.orientation,e={flex:"none","-webkit-box-flex":"0"};return"vertical"===t&&(e.width="3px"),this.lineSpan&&("vertical"===t?e.height=this.getWidth(this.lineSpan):e.width=this.getWidth(this.lineSpan)),e}},classes:function(){return this.isDone?"weui-wepay-flow__line_done":!this.isDone&&this.tip?"weui-wepay-flow__line_ing":void 0}}}),_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-wepay-flow__line",class:t.classes,style:t.styles},[i("div",{staticClass:"weui-wepay-flow__process",style:{width:t.getWidth(this.processSpan)}}),t._v(" "),t.tip?i("div",{class:"weui-wepay-flow__info-"+t.finalTipDirection,style:{left:t.getWidth(this.processSpan)}},[t._v(t._s(t.tip))]):t._e()])},staticRenderFns:[]},g=i("C7Lr")(m,_,!1,null,null,null).exports,w=i("gpPJ"),b=i("CKVb"),C=i("IXui"),S=i("pxwZ"),L=i("8e4C"),y=(C.a,{name:"FlowStep",components:{XButton:C.a},props:["title","content","topLine","done"],data:function(){return{showTopLine:!0,isDone:!1}},mounted:function(){this.topLine||(this.showTopLine=!1),this.done&&(this.isDone=!0)},watch:{done:function(t,e){this.isDone=t}}}),$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"step-item"},[t.showTopLine?i("div",{staticClass:"vertical-line-top",class:{"line-done":t.isDone}}):t._e(),t._v(" "),i("div",{staticClass:"circle-icon",class:{"circle-done":t.isDone}},[t.isDone?i("i",{staticClass:"fa fa-check fa-lg circle-i-done",attrs:{slot:"icon"},slot:"icon"}):i("i",{staticClass:"fa fa-ellipsis-h fa-lg circle-i",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),i("div",{staticClass:"content"},[i("h4",[t._v(t._s(t.title))]),t._v(" "),i("p",[t._v(t._s(t.content))])]),t._v(" "),i("div",{staticClass:"vertical-line-bottom",class:{"line-done":t.isDone}})])},staticRenderFns:[]};var D=i("C7Lr")(y,$,!1,function(t){i("UF7u")},null,null).exports,k=i("VKKs"),x=i("ZpOu"),E=(w.a,b.a,C.a,x.a,{name:"DriverOperation",components:{Grid:o,GridItem:c,Flow:f,FlowState:v,FlowLine:g,FlowStep:D,Cell:w.a,Group:b.a,XButton:C.a,NoPermission:x.a},data:function(){return{item:{},billCode:"提货单号 : ",step:{O:-2,A:-1,C:0,W:1,E:2,L:3,T:4,D:5,R:6,G:7},stepDetail:{O:"已打开",A:"已生效",C:"已取消",W:"车辆到库",E:"提货确认",L:"装车完成",T:"发运",D:"运抵",R:"已回单",G:"已签收"},role:""}},mounted:function(){this.$store.commit("updateTitle",L.g);var t=k.b.get(L.b);if(null!==t&&(this.role=t.role),"司机"===this.role){var e={truck_loading_no:this.$route.query.truck_loading_no};this.getTruckInfo(e)}},methods:{reachConfirm:function(t){var e={billCode:this.item.bol_code,status:t,driverName:this.item.driver_name,driverMobile:this.item.driver_phone,extractSite:this.item.extract_site};this.$router.push({path:"/init/pickGoodsSign",query:e})},driverUpdateStatus:function(t){if(this.step[t]<=this.step[this.item.status])this.$vux.toast.text("您当前已是"+this.stepDetail[this.item.status]+"状态 !","middle");else if("W"===t)this.reachConfirm(t);else if("D"===t&&this.step[this.item.status]<4)this.$vux.toast.text("发运后才能进行此操作哦~","middle");else{var e={billCode:this.item.bol_code,status:t,driverName:this.item.driver_name,driverMobile:this.item.driver_phone};this.$router.push({path:"/init/UpdateStatus",query:e})}},driverUpdateOnroad:function(){if("T"===this.item.status||"D"===this.item.status){var t={billCode:this.item.bol_code,driverName:this.item.driver_name,driverMobile:this.item.driver_phone};this.$router.push({path:"/init/UpdateOnroad",query:t})}else this.$vux.toast.text("发运后才能进行此操作哦~","middle")},getTruckInfo:function(t){var e=this;this.$store.commit("updateLoading",!0),S.a.getTruckInfo(t).then(function(t){e.$store.commit("updateLoading",!1),0===t.code?(e.item=t.data,e.billCode=" 提货单号 : "+e.item.bol_code+" "):e.$vux.toast.text(t.message,"middle")},function(t){e.$store.commit("updateLoading",!1)})},toPickGoods:function(){var t={truck_loading_no:this.$route.query.truck_loading_no};this.$router.push({name:"DeliveryInfo",query:t})}}}),O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"driver-operation"},["司机"===t.role?i("div",[i("div",{staticClass:"task-container"},[i("div",{staticClass:"title"},[t._v("当前状态 : "+t._s(t.stepDetail[t.item.status]))]),t._v(" "),i("p",[t._v("提货地点 : "+t._s(t.item.extract_site))])]),t._v(" "),i("group",[i("cell",{staticClass:"bill-code",attrs:{title:t.billCode,"is-link":""},nativeOn:{click:function(e){return t.toPickGoods(e)}}},[i("i",{staticClass:"fa fa-truck fa-lg fa-grey",attrs:{slot:"icon"},slot:"icon"})])],1),t._v(" "),i("grid",{attrs:{cols:3,"show-lr-borders":!1}},[i("grid-item",{attrs:{label:"车辆到库"},nativeOn:{click:function(e){t.driverUpdateStatus("W")}}},[i("i",{staticClass:"fa fa-cubes fa-lg fa-green",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),i("grid-item",{attrs:{label:"提货确认"},nativeOn:{click:function(e){t.driverUpdateStatus("E")}}},[i("i",{staticClass:"fa fa-handshake-o fa-lg fa-green",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),i("grid-item",{attrs:{label:"装车完成"},nativeOn:{click:function(e){t.driverUpdateStatus("L")}}},[i("i",{staticClass:"fa fa-angellist fa-lg fa-blue",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),i("grid-item",{attrs:{label:"发运"},nativeOn:{click:function(e){t.driverUpdateStatus("T")}}},[i("i",{staticClass:"fa fa-truck fa-lg fa-blue",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),i("grid-item",{attrs:{label:"在途运输"},nativeOn:{click:function(e){return t.driverUpdateOnroad(e)}}},[i("i",{staticClass:"fa fa-globe fa-lg fa-orange",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),i("grid-item",{attrs:{label:"运抵"},nativeOn:{click:function(e){t.driverUpdateStatus("D")}}},[i("i",{staticClass:"fa fa-flag fa-lg fa-orange",attrs:{slot:"icon"},slot:"icon"})])],1),t._v(" "),i("div",{staticClass:"flow-container"},[i("flow-step",{attrs:{topLine:!1,done:"W"===t.item.status||"E"===t.item.status||"L"===t.item.status||"T"===t.item.status||"D"===t.item.status,title:"车辆到库",content:"车辆到达指定提货地点，地图上获取实时定位完成签到确认"}}),t._v(" "),i("flow-step",{attrs:{topLine:!0,done:"E"===t.item.status||"L"===t.item.status||"T"===t.item.status||"D"===t.item.status,title:"提货确认",content:"提货并进行装车，装车拍照上传照片"}}),t._v(" "),i("flow-step",{attrs:{topLine:!0,done:"L"===t.item.status||"T"===t.item.status||"D"===t.item.status,title:"装车完成",content:"装车完成后，拍摄装车完成照片进行确认"}}),t._v(" "),i("flow-step",{attrs:{topLine:!0,done:"T"===t.item.status||"D"===t.item.status,title:"发运",content:"发运后，拍摄照片进行确认发运"}}),t._v(" "),i("flow-step",{attrs:{topLine:!0,done:"D"===t.item.status,title:"运抵",content:"运抵后，拍摄照片进行确认运抵"}})],1)],1):i("no-permission")],1)},staticRenderFns:[]};var T=i("C7Lr")(E,O,!1,function(t){i("PFlE")},null,null);e.default=T.exports},OE2t:function(t,e){},PFlE:function(t,e){},UF7u:function(t,e){},oL2B:function(t,e){},pME6:function(t,e){}});