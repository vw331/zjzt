webpackJsonp([7],{"36PW":function(t,e){},U4lh:function(t,e){},Zwmq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("3cXf"),l=i.n(n),a=i("CKVb"),o=i("gpPJ"),r=i("7+S+"),s=(Boolean,String,Object,Boolean,Boolean,String,{name:"cell-box",props:{isLink:Boolean,link:[String,Object],borderIntent:{type:Boolean,default:!0},noFlex:Boolean,alignItems:String},computed:{style:function(){if(this.alignItems)return{"align-items":this.alignItems}},className:function(){return{"vux-tap-active":this.isLink||!!this.link,"weui-cell_access":this.isLink||!!this.link,"vux-cell-no-border-intent":!this.borderIntent}}},methods:{onClick:function(){this.link&&Object(r.a)(this.link,this.$router)}}}),c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-cell-box weui-cell",class:this.className,style:this.style,on:{click:this.onClick}},[this._t("default")],2)},staticRenderFns:[]};var u=i("C7Lr")(s,c,!1,function(t){i("36PW")},null,null).exports,v=i("IXui"),d=i("5CvF"),h=i("4rfY"),m=i("JGLT"),_=i("2vzc"),p=i("n9nh"),f=(_.a,String,Boolean,Boolean,String,Number,String,Boolean,Number,Boolean,Array,{name:"x-switch",components:{InlineDesc:_.a},computed:{labelStyle:function(){var t=/<\/?[^>]*>/.test(this.title),e=Math.min(t?5:this.title.length+1,14)+"em";return Object(p.a)({display:"block",width:this.$parent.labelWidth||e,textAlign:this.$parent.labelAlign})},labelClass:function(){return{"vux-cell-justify":this.$parent&&"justify"===this.$parent.labelAlign}}},methods:{onClick:function(){this.$emit("on-click",!this.currentValue,this.currentValue)},toBoolean:function(t){return this.valueMap?1===this.valueMap.indexOf(t):t},toRaw:function(t){return this.valueMap?this.valueMap[t?1:0]:t}},props:{title:{type:String,required:!0},disabled:Boolean,value:{type:[Boolean,String,Number],default:!1},inlineDesc:[String,Boolean,Number],preventDefault:Boolean,valueMap:{type:Array,default:function(){return[!1,!0]}}},data:function(){return{currentValue:this.toBoolean(this.value)}},watch:{currentValue:function(t){var e=this.toRaw(t);this.$emit("input",e),this.$emit("on-change",e)},value:function(t){this.currentValue=this.toBoolean(t)}}}),g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-x-switch weui-cell weui-cell_switch"},[i("div",{staticClass:"weui-cell__bd"},[i("label",{staticClass:"weui-label",class:t.labelClass,style:t.labelStyle,domProps:{innerHTML:t._s(t.title)}}),t._v(" "),t.inlineDesc?i("inline-desc",[t._v(t._s(t.inlineDesc))]):t._e()],1),t._v(" "),i("div",{staticClass:"weui-cell__ft"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"weui-switch",attrs:{type:"checkbox",disabled:t.disabled},domProps:{checked:Array.isArray(t.currentValue)?t._i(t.currentValue,null)>-1:t.currentValue},on:{change:function(e){var i=t.currentValue,n=e.target,l=!!n.checked;if(Array.isArray(i)){var a=t._i(i,null);n.checked?a<0&&(t.currentValue=i.concat([null])):a>-1&&(t.currentValue=i.slice(0,a).concat(i.slice(a+1)))}else t.currentValue=l}}}),t._v(" "),t.preventDefault?i("div",{staticClass:"vux-x-switch-overlay",on:{click:t.onClick}}):t._e()])])},staticRenderFns:[]};var b=i("C7Lr")(f,g,!1,function(t){i("U4lh")},null,null).exports,x=i("Jp5S"),k=i("pxwZ"),y=i("8e4C"),w=i("VKKs"),$=i("ZpOu"),C=(x.a,a.a,o.a,v.a,d.a,h.a,m.a,$.a,{directives:{TransferDom:x.a},name:"TruckInfo",components:{Group:a.a,Cell:o.a,CellBox:u,XButton:v.a,Flexbox:d.a,FlexboxItem:h.a,Confirm:m.a,XSwitch:b,NoPermission:$.a},data:function(){return{item:"",showPopup:!1,role:""}},mounted:function(){this.$store.commit("updateTitle",y.q);var t=w.b.get(y.b);null!==t&&(this.role=t.role);var e=this.$route.query.openid;if(void 0!==e&&""!==e&&this.$store.commit("updateOpenid",e),"承运商"===this.role){var i={truck_loading_no:this.$route.query.truck_loading_no};this.getTruckInfo(i)}},methods:{dispatchStatus:function(t){var e="";switch(t){case"0":e="待接收";break;case"1":e="已调度";break;case"2":e="已拒绝"}return e},beReject:function(){this.showPopup=!0},popupOnConfirm:function(t){var e=this;if(console.log("value="+t),null!==t&&""!==t){var i={truck_loading_no:this.$route.query.truck_loading_no,reason:t};console.log("params="+l()(i)),this.$store.commit("updateLoading",!0),k.a.doRejectBill(i).then(function(t){e.$store.commit("updateLoading",!1),0===t.code?e.$vux.toast.text("操作成功, 您已拒绝改调度单","middle"):e.$vux.toast.text(t.message,"middle")},function(t){e.$store.commit("updateLoading",!1)})}else this.$vux.toast.text("拒绝理由不能为空哦~","middle")},beAccept:function(){var t={truck_loading_no:this.$route.query.truck_loading_no,accept:!0,item:""};this.$router.push({path:"/init/vehicleinfo",query:t})},updataLicence:function(){var t={truck_loading_no:this.$route.query.truck_loading_no,accept:!0,item:this.item},e=this;e.$vux.confirm.show({title:"更改派车信息",content:"您确定要更改派车信息 ?",onCancel:function(){console.log("cancel")},onConfirm:function(){e.$router.push({path:"/init/vehicleinfo",query:t})}})},toInvoicebill:function(){var t={truck_loading_no:this.$route.query.truck_loading_no,invoicebill:this.item};this.$router.push({path:"/init/invoicebill",query:t})},getTruckInfo:function(t){var e=this;this.$store.commit("updateLoading",!0),k.a.getTruckInfo(t).then(function(t){e.$store.commit("updateLoading",!1),0===t.code?e.item=t.data:e.$vux.toast.text(t.message,"middle")},function(t){console.log("error="+l()(t)),e.$store.commit("updateLoading",!1)})}}}),B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"truck-info"},["承运商"===t.role?i("div",[i("group",[i("cell",{attrs:{title:"承运商"}},[t._v(t._s(t.item.carrier_name))]),t._v(" "),i("cell",{attrs:{title:"单号"}},[i("div",{staticClass:"bill-number",on:{click:t.toInvoicebill}},[t._v(t._s(t.item.bol_code))])]),t._v(" "),i("cell",{attrs:{title:"状态"}},[t._v(t._s(t.dispatchStatus(t.item.dispatch_status)))]),t._v(" "),i("cell",{attrs:{title:"发货单数量"}},[t._v(t._s(t.item.invoice_quantity))]),t._v(" "),i("cell",{attrs:{title:"件数"}},[t._v(t._s(t.item.total_quantity))]),t._v(" "),i("cell",{attrs:{title:"重量"}},[t._v(t._s(t.item.weight)+" KG")]),t._v(" "),i("cell",{attrs:{title:"体积"}},[t._v(t._s(t.item.volume)+" m³")]),t._v(" "),i("cell",{attrs:{title:"是否多点配送"}},[t._v(t._s(t.item.multipoint))]),t._v(" "),i("cell",{attrs:{title:"配送点位数"}},[t._v(t._s(t.item.delivery_num))]),t._v(" "),i("cell",{attrs:{title:"配载类型"}},[t._v(t._s(t.item.stowage_type))]),t._v(" "),i("cell",{attrs:{title:"提货时限"}},[t._v(t._s(t.item.time_limit))])],1),t._v(" "),""===t.item.driver_name&&"承运商"===t.role?i("div",{staticClass:"operate"},["2"!==t.item.dispatch_status?i("flexbox",[i("flexbox-item",[i("x-button",{attrs:{type:"warn"},nativeOn:{click:function(e){return t.beReject(e)}}},[t._v("拒绝")])],1),t._v(" "),i("flexbox-item",[i("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.beAccept(e)}}},[t._v("受理")])],1)],1):i("div",{staticStyle:{width:"100%","text-align":"center",height:"40px","line-height":"40px",color:"grey"}},[t._v("\n\t\t\t\t\t已拒绝\n\t\t\t\t")])],1):t._e(),t._v(" "),""!==t.item&&""!==t.item.driver_name&&"承运商"===t.role?i("div",{staticClass:"vehicleinfo"},[t._m(0),t._v(" "),i("group",[i("cell",{attrs:{title:"司机"}},[t._v(t._s(t.item.driver_name))]),t._v(" "),i("cell",{attrs:{title:"手机号"}},[t._v(t._s(t.item.driver_phone))]),t._v(" "),i("cell",{attrs:{title:"车牌号"}},[t._v(t._s(t.item.license))]),t._v(" "),i("cell",{attrs:{title:"车型"}},[t._v(t._s(t.item.vehicle))])],1),t._v(" "),i("div",{staticClass:"btn"},[i("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.updataLicence(e)}}},[t._v("更改派车信息")])],1)],1):t._e(),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("confirm",{attrs:{"show-input":"",placeholder:"填写拒绝理由",title:"您确定要拒绝此调度单吗 ?"},on:{"on-cancel":t.popupOnCancel,"on-confirm":t.popupOnConfirm},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}})],1)],1):i("no-permission")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("strong",[this._v("派车信息")])])}]};var S=i("C7Lr")(C,B,!1,function(t){i("jnZA")},"data-v-0371d9d6",null);e.default=S.exports},jnZA:function(t,e){}});